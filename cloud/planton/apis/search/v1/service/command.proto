syntax = "proto3";

package cloud.planton.apis.search.v1.service;

import "cloud/planton/apis/commons/rpc/pagination.proto";
import "cloud/planton/apis/search/v1/model/io.proto";
import "cloud/planton/apis/iam/v1/iampolicy/options/rpcauthorizationmethodoptions/rpc_authorization_method_options.proto";

service SearchCommandController {
  // The `addToSearchIndex` RPC service method allows clients to add a new API resource to the search index.
  // This operation updates the search index with the provided resource information, making it searchable
  // within the system.

  // The input parameters for this operation are packaged into an `ApiResourceSearchRecord` message,
  // which includes the necessary details of the API resource to be added to the search index.

  // This method returns the `ApiResourceSearchRecord` message, confirming the details of the API resource
  // that was added to the search index.
  rpc addToSearchIndex(cloud.planton.apis.search.v1.model.ApiResourceSearchRecord)
      returns (cloud.planton.apis.search.v1.model.ApiResourceSearchRecord) {
    option (cloud.planton.apis.iam.v1.iampolicy.options.rpcauthorizationmethodoptions.authorization_config).resource_kind = platform;
    option (cloud.planton.apis.iam.v1.iampolicy.options.rpcauthorizationmethodoptions.authorization_config).permission = platform_microservice_account;
    option (cloud.planton.apis.iam.v1.iampolicy.options.rpcauthorizationmethodoptions.authorization_config).resource_id = "planton-cloud";
    option (cloud.planton.apis.iam.v1.iampolicy.options.rpcauthorizationmethodoptions.authorization_config).error_msg = "unauthorized to add api resource to search index";
  }
}

