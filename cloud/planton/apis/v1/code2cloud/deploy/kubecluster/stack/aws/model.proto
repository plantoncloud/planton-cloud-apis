syntax = "proto3";

package cloud.planton.apis.v1.code2cloud.deploy.kubecluster.stack.aws;

import "cloud/planton/apis/v1/commons/pulumi/operation/rpc/model.proto";
import "cloud/planton/apis/v1/stack/rpc/model.proto";
import "cloud/planton/apis/v1/code2cloud/cloudaccount/rpc/model.proto";
import "cloud/planton/apis/v1/code2cloud/deploy/kubecluster/rpc/enums/enums.proto";
import "cloud/planton/apis/v1/code2cloud/deploy/kubecluster/rpc/model.proto";
import "cloud/planton/apis/v1/code2cloud/deploy/kubecluster/state/model.proto";

message KubeClusterAwsStackInput {
  //stack job
  cloud.planton.apis.v1.stack.rpc.StackJob stack_job = 1;
  // pulumi stack credentials
  KubeClusterAwsStackCredentialsInput credentials_input = 2;
  // inputs used for creating stack resources
  KubeClusterAwsStackResourceInput resource_input = 3;
}

// stack credentials input
message KubeClusterAwsStackCredentialsInput {
  //aws provider credential input
  cloud.planton.apis.v1.commons.pulumi.operation.rpc.AwsProviderCredential aws = 1;
}

// stack resource input
message KubeClusterAwsStackResourceInput {
  //details of the kube-cluster
  cloud.planton.apis.v1.code2cloud.deploy.kubecluster.state.KubeClusterState kube_cluster = 1;
}

// stack outputs
message KubeClusterAwsStackOutputs {
  // id of the vpc in which the kube-cluster is created
  string cluster_vpc_id = 1;
  // kube-cluster endpoint
  string cluster_endpoint = 2;
  // kube-cluster ca data
  string cluster_ca_data = 3;
}

//stack response
message KubeClusterAwsStackResponse {
  //stack progress
  cloud.planton.apis.v1.stack.rpc.StackProgress progress = 1;
  //stack outputs
  KubeClusterAwsStackOutputs outputs = 3;
}
